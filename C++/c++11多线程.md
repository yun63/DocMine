## Mysql存储引擎

#### 0 准备知识

##### 0.1 事务四大特性（ACID）

1. 原子性

2. 一致性

   数据库总是从一个一致性的状态转移到另外一个一致性的状态。

3. 隔离性

   一个事务所做的修改在最终提交之前，对其他事务是不可见的。

4. 持久性

   一旦事务提交，则其所做的修改就会永久保存到数据库中，即使系统崩溃，修改的数据也不会丢失。

##### 0.2 四大隔离级别

1. READ UNCOMMITED（未提交读）

   事务中的修改，即使没有提交，对其他事务是可见的。

   问题：脏读

2. READ COMMITED（提交读）

   事务中的修改，在没有提交前，对其他事务是不可见的。

   问题：不可重复读，两次查询的结果不一致

3. REPEATABLE READ（可重复度）

   解决了脏读，同时保证在同一个事务中的多次读取同样记录的结果一致性。

   问题：幻读

   幻读：当某个事务在读取某个范围内的记录时，另一个事务又在改范围内插入了新的记录，当之前的事务再次读取该范围内的记录时，会产生幻行。

4. SERIALIZABLE（可串行化）

#### 1 MyISAM

1. 表锁，不支持行级锁

   MyISAM对整张表进行加锁。读取时会对表加共享锁，写入时对表加排它锁。

2. 支持全文索引，基于分词创建索引，支持复杂的查询

3. 性能不高

4. 不支持事务

#### 2 InnoDB

Mysql默认的存储引擎

1. 支持事务
2. InnoDB才MVCC来支持高并发，并且实现了四个标准级别的隔离。默认级别是REPEATABLE READ（可重复读）
3. 既支持表锁，又支持行级锁
4. 隔离级别默认可重复读，通过间隙锁解决幻读问题
5. 